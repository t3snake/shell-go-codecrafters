# Building my own shell (in Codecrafters.io)

This project is an implementation of POSIX compliant shell written in Go, that's capable of interpreting shell commands, running external programs and builtin commands like cd, pwd, echo and more.

MacOS and Linux supported.

[Build your own shell - codecrafters](https://app.codecrafters.io/courses/shell/overview)

## Features

- **Basic REPL**: The shell interacts with the user through a simple Read-Eval-Print-Loop.
- **Built-in Commands**: `echo`, `pwd`, `cd`, `history`, `exit` and `type`.
- **Command Execution**: Executes external commands found in the system's `PATH`.
- **Redirection**: Supports standard output (`1>`) and standard error (`2>`) redirection to files, both for overwriting and appending.
- **Argument Parsing**: Handles arguments enclosed in quotes (`'` or `"`) and escape sequences (like `\`).
- **Path Resolution**: Handles relative, absolute, and home (`~`) paths when executing the `cd` command.
- **Tab Completion**: Pressing <kbd>Tab</kbd> autocompletes commands and executables using a prefix tree built from built-ins and `$PATH`. Supports multiple completion with double tab and partial completions.
- **Command History**: Use the <kbd>Up</kbd> and <kbd>Down</kbd> arrow keys to navigate through previous commands. The `history` command prints the command history.
- **Raw Terminal Mode**: The shell uses raw terminal mode for advanced input handling, including custom line editing, history navigation, and tab completion. Build my own GNU readline implementation.

## Installation

Ensure you have Go installed. You can check this by running:

```sh
go version
```

If Go is not installed, you can follow the official instructions at [https://golang.org/doc/install](https://golang.org/doc/install).

Clone this repository to your local machine:

```sh
git clone https://github.com/t3snake/shell-go-codecrafters.git
cd shell-go-codecrafters
```

Then run the shell script

```sh
./run_shell.sh
```

## Usage

### Built-in Commands

- **`echo [text]`**: Prints the provided text to the console.

  Example:
  ```sh
  $ echo Hello, World!
  Hello, World!
  ```

- **`pwd`**: Prints the current working directory.

  Example:
  ```sh
  $ pwd
  /home/user
  ```

- **`cd [directory]`**: Changes the current working directory to the specified directory. The argument can be an absolute path, relative path, or `~` (for the home directory).

  Example:
  ```sh
  $ cd /home/user/projects
  ```

- **`type [command]`**: Displays whether the specified command is a shell built-in or an external command. 

  Example:
  ```sh
  $ type echo
  echo is a shell builtin
  ```

- **`history [N]`**: Shows the last N commands entered (or all if N is omitted).

  Example:
  ```sh
  $ history 5
      1  echo Hello
      2  pwd
      3  ls
      4  cd /tmp
      5  history 5
  ```

- **`exit [0]`**: Exits the shell when given the argument `0`.

  Example:
  ```sh
  $ exit 0
  ```

### Tab Completion

- Press <kbd>Tab</kbd> to autocomplete commands and executables. Press <kbd>Tab</kbd> twice to list all possible completions for the current prefix.

### Command History Navigation

- Use the <kbd>Up</kbd> and <kbd>Down</kbd> arrow keys to scroll through previous commands.

### Redirection

- **Redirecting standard output (`>` or `1>`)**: Redirects the standard output (stdout) of a command to a file.

  Example:
  ```sh
  $ echo Hello > output.txt
  ```

- **Redirecting standard error (`2>`)**: Redirects the standard error (stderr) of a command to a file.

  Example:
  ```sh
  $ ls nonexistent_directory 2> error.log
  ```

- **Appending standard output (`>>` or `1>>`)**: Appends the standard output (stdout) of a command to a file.

  Example:
  ```sh
  $ echo Another line >> output.txt
  ```

- **Appending standard error (`2>>`)**: Appends the standard error (stderr) of a command to a file.

  Example:
  ```sh
  $ ls nonexistent_directory 2>> error.log
  ```

### Command Execution

This shell supports the execution of any command available in the system's `PATH`, such as:

```sh
$ ls
$ cat file.txt
$ echo "Hello, World!"
```

If a command is not found, it will return an error message indicating that the command is not recognized.

See code summary generated by ChatGPT [here](./cmd/myshell/README.md)